{
  "info": {
    "name": "Professor API - Ready",
    "_postman_id": "a2ad8b4e-5d3c-4b02-9f2a-apae-professor-ready",
    "description": "Collection pronta com URLs absolutas para POST (com/sem CPF), GET, GET ?ativos=true e PATCH inativar.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Criar Professor - SEM CPF (POST)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Accept", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8080/api/professores",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores" ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Prof Sem CPF\",\n  \"email\": \"semcpf+{{$timestamp}}@example.com\",\n  \"especialidade\": \"Educacao Especial\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));",
              "const b = pm.response.json();",
              "pm.test('Tem ID', () => pm.expect(b.id).to.be.a('number'));",
              "pm.test('Especialidade correta', () => pm.expect(b.especialidade).to.eql('Educacao Especial'));",
              "pm.test('CPF opcional (nulo/vazio/ausente)', () => pm.expect([null, '', undefined]).to.include(b.cpf));",
              "if (b && b.id) { pm.collectionVariables.set('lastId', String(b.id)); }"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Criar Professor - COM CPF (POST)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Accept", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8080/api/professores",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores" ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Prof Com CPF\",\n  \"email\": \"comcpf+{{$timestamp}}@example.com\",\n  \"especialidade\": \"Psicopedagogia\",\n  \"cpf\": \"98765432102\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));",
              "const b = pm.response.json();",
              "pm.test('CPF retornado', () => pm.expect(b.cpf).to.eql('98765432102'));",
              "if (b && b.id) { pm.collectionVariables.set('lastId', String(b.id)); }"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Listar Professores (GET)",
      "request": {
        "method": "GET",
        "header": [ { "key": "Accept", "value": "application/json" } ],
        "url": {
          "raw": "http://localhost:8080/api/professores",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores" ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Listar Professores Ativos (GET ?ativos=true)",
      "request": {
        "method": "GET",
        "header": [ { "key": "Accept", "value": "application/json" } ],
        "url": {
          "raw": "http://localhost:8080/api/professores?ativos=true",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores" ],
          "query": [ { "key": "ativos", "value": "true" } ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Inativar Professor - lastId (PATCH)",
      "request": {
        "method": "PATCH",
        "header": [ { "key": "Accept", "value": "application/json" } ],
        "url": {
          "raw": "http://localhost:8080/api/professores/{{lastId}}/inativar",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores", "{{lastId}}", "inativar" ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const b = pm.response.json();",
              "pm.test('Marcado inativo', () => pm.expect(b.ativo).to.eql(false));"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Inativar Professor - ID fixo 1 (PATCH)",
      "request": {
        "method": "PATCH",
        "header": [ { "key": "Accept", "value": "application/json" } ],
        "url": {
          "raw": "http://localhost:8080/api/professores/1/inativar",
          "host": [ "http://localhost:8080" ],
          "path": [ "api", "professores", "1", "inativar" ]
        }
      }
    }
  ],
  "variable": [
    { "key": "lastId", "value": "", "type": "string" }
  ]
}
